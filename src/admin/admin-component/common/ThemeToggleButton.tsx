import { useTheme } from "../../../context/ThemeContext";

interface ThemeToggleButtonProps {
  onItemClick?: () => void;
}

export const ThemeToggleButton: React.FC<ThemeToggleButtonProps> = ({
  onItemClick,
}) => {
  const { toggleTheme } = useTheme();

  // Handler for both theme toggle and dropdown close
  const handleClick = () => {
    toggleTheme();
    if (onItemClick) onItemClick();
  };

  return (
    <button
      onClick={handleClick}
      className="flex items-center gap-3 px-3 py-2 font-medium text-gray-700 rounded-lg group text-theme-sm hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-white/5 dark:hover:text-gray-300 w-full transition-colors"
      type="button"
    >
      {/* Sun/Moon Icon */}
      <span className="flex items-center justify-center">
        <svg
          className="hidden dark:block"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M12 3.25C12.4142 3.25 12.75 3.58579 12.75 4V5.25C12.75 5.66421 12.4142 6 12 6C11.5858 6 11.25 5.66421 11.25 5.25V4C11.25 3.58579 11.5858 3.25 12 3.25ZM12 7.75C9.37665 7.75 7.25 9.87665 7.25 12.5C7.25 15.1234 9.37665 17.25 12 17.25C14.6234 17.25 16.75 15.1234 16.75 12.5C16.75 9.87665 14.6234 7.75 12 7.75ZM5.25 12.5C5.25 8.77208 8.27208 5.75 12 5.75C15.7279 5.75 18.75 8.77208 18.75 12.5C18.75 16.2279 15.7279 19.25 12 19.25C8.27208 19.25 5.25 16.2279 5.25 12.5ZM19.5303 6.46967C19.8232 6.17678 19.8232 5.7019 19.5303 5.40901C19.2374 5.11612 18.7626 5.11612 18.4697 5.40901L17.5858 6.29289C17.2929 6.58579 17.2929 7.06066 17.5858 7.35355C17.8787 7.64645 18.3536 7.64645 18.6464 7.35355L19.5303 6.46967ZM21.25 12.5C21.25 12.9142 20.9142 13.25 20.5 13.25H19.25C18.8358 13.25 18.5 12.9142 18.5 12.5C18.5 12.0858 18.8358 11.75 19.25 11.75H20.5C20.9142 11.75 21.25 12.0858 21.25 12.5ZM18.4697 19.5303C18.7626 19.8232 19.2374 19.8232 19.5303 19.5303C19.8232 19.2374 19.8232 18.7626 19.5303 18.4697L18.6464 17.5858C18.3536 17.2929 17.8787 17.2929 17.5858 17.5858C17.2929 17.8787 17.2929 18.3536 17.5858 18.6464L18.4697 19.5303ZM12 20.75C12.4142 20.75 12.75 21.0858 12.75 21.5V22.75C12.75 23.1642 12.4142 23.5 12 23.5C11.5858 23.5 11.25 23.1642 11.25 22.75V21.5C11.25 21.0858 11.5858 20.75 12 20.75ZM7.35355 18.6464C7.64645 18.3536 7.64645 17.8787 7.35355 17.5858C7.06066 17.2929 6.58579 17.2929 6.29289 17.5858L5.40901 18.4697C5.11612 18.7626 5.11612 19.2374 5.40901 19.5303C5.7019 19.8232 6.17678 19.8232 6.46967 19.5303L7.35355 18.6464ZM4 13.25C3.58579 13.25 3.25 12.9142 3.25 12.5C3.25 12.0858 3.58579 11.75 4 11.75H5.25C5.66421 11.75 6 12.0858 6 12.5C6 12.9142 5.66421 13.25 5.25 13.25H4ZM5.40901 5.40901C5.11612 5.11612 5.11612 4.64124 5.40901 4.34835C5.7019 4.05546 6.17678 4.05546 6.46967 4.34835L7.35355 5.23223C7.64645 5.52513 7.64645 5.99999 7.35355 6.29289C7.06066 6.58579 6.58579 6.58579 6.29289 6.29289L5.40901 5.40901Z"
            fill="currentColor"
          />
        </svg>
        <svg
          className="dark:hidden"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21 12.75C21 13.1642 20.6642 13.5 20.25 13.5H19C18.5858 13.5 18.25 13.1642 18.25 12.75C18.25 12.3358 18.5858 12 19 12H20.25C20.6642 12 21 12.3358 21 12.75ZM12 21C12.4142 21 12.75 21.3358 12.75 21.75V23C12.75 23.4142 12.4142 23.75 12 23.75C11.5858 23.75 11.25 23.4142 11.25 23V21.75C11.25 21.3358 11.5858 21 12 21ZM4.46967 19.5303C4.76256 19.8232 5.23744 19.8232 5.53033 19.5303C5.82322 19.2374 5.82322 18.7626 5.53033 18.4697L4.64645 17.5858C4.35355 17.2929 3.87868 17.2929 3.58579 17.5858C3.29289 17.8787 3.29289 18.3536 3.58579 18.6464L4.46967 19.5303ZM3 12.75C3 13.1642 3.33579 13.5 3.75 13.5H5C5.41421 13.5 5.75 13.1642 5.75 12.75C5.75 12.3358 5.41421 12 5 12H3.75C3.33579 12 3 12.3358 3 12.75ZM4.46967 5.40901C4.17678 5.11612 4.17678 4.64124 4.46967 4.34835C4.76256 4.05546 5.23744 4.05546 5.53033 4.34835L6.41421 5.23223C6.70711 5.52513 6.70711 5.99999 6.41421 6.29289C6.12132 6.58579 5.64645 6.58579 5.35355 6.29289L4.46967 5.40901ZM12 3C12.4142 3 12.75 3.33579 12.75 3.75V5C12.75 5.41421 12.4142 5.75 12 5.75C11.5858 5.75 11.25 5.41421 11.25 5V3.75C11.25 3.33579 11.5858 3 12 3ZM18.6464 5.40901C18.3536 5.11612 17.8787 5.11612 17.5858 5.40901C17.2929 5.7019 17.2929 6.17678 17.5858 6.46967L18.4697 7.35355C18.7626 7.64645 19.2374 7.64645 19.5303 7.35355C19.8232 7.06066 19.8232 6.58579 19.5303 6.29289L18.6464 5.40901Z"
            fill="currentColor"
          />
        </svg>
      </span>
      <span>Change theme</span>
    </button>
  );
};
